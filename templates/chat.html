{% extends "base.html" %}
{% block title %}Chat d'Ã©quipe{% endblock %}

{% block content %}

<h1>Chat d'Ã©quipe</h1>

<div class="chat-container">

    <div class="messages-box">
        {% for m in messages %}
            <div class="message-item">
                <p>
                    <strong>{{ m.user.username }}</strong>
                    <span class="timestamp">{{ m.timestamp.strftime("%d/%m/%Y %H:%M") }}</span>
                </p>

                {% if m.content %}
                    <div class="message-text">{{ m.content }}</div>
                {% endif %}

                {% if m.filename %}
                    <p>
                        ðŸ“Ž <a href="{{ url_for('chat_download', msg_id=m.id) }}">
                            {{ m.original_name or m.filename }}
                        </a>
                    </p>
                {% endif %}
            </div>
        {% endfor %}
    </div>

    <div class="chat-form">
        <form action="{{ url_for('chat_send') }}" method="post" enctype="multipart/form-data">

            <textarea name="message" placeholder="Ã‰cris un message..." rows="3"></textarea>

            <label for="file">Joindre un fichier :</label>
            <input type="file" name="file" id="file">

            <button class="btn btn-primary" style="margin-top:10px;">Envoyer</button>
        </form>
    </div>

</div>

<style>
    .chat-container {
        max-width: 900px;
        margin: auto;
    }

    .messages-box {
        background:#f7f7f7;
        padding:20px;
        border-radius:10px;
        margin-bottom:20px;
        max-height:500px;
        overflow-y:auto;
    }

    .message-item {
        background:white;
        padding:12px;
        border-radius:8px;
        margin-bottom:12px;
        border:1px solid #ddd;
    }

    .message-text {
        margin:8px 0;
    }

    .timestamp {
        font-size:12px;
        color:#777;
        margin-left:5px;
    }

    textarea {
        width:100%;
        padding:10px;
    }
</style>

{% endblock %}
