{% extends "base.html" %}
{% block title %}Rendez-vous{% endblock %}

{% block content %}

<div class="header-row">
    <h1>
        {% if action == "new" %}
            Nouveau rendez-vous
        {% else %}
            Modifier le rendez-vous
        {% endif %}
    </h1>

    <a class="btn" href="{{ url_for('list_appointments') }}">← Retour</a>
</div>

<div class="card">

    <form method="post">

        <label>Titre :</label>
        <input type="text" name="title" required
               value="{{ rdv.title if rdv else '' }}">

        {% if client %}
            <!-- Si le RDV est lié à un client -->
            <label>Client :</label>
            <input type="text" disabled
                   value="{{ client.name }}">
            <input type="hidden" name="client_id" value="{{ client.id }}">
        {% else %}
            <label>Nom du client :</label>
            <input type="text" name="client_name" required
                   value="{{ rdv.client_name if rdv else '' }}">
        {% endif %}

        <label>Date :</label>
        <input type="date" name="date" required
               value="{{ rdv.date.strftime('%Y-%m-%d') if rdv else '' }}">

        <label>Heure :</label>
        <input type="time" name="time" required
               value="{{ rdv.time.strftime('%H:%M') if rdv else '' }}">

        <label>Notes :</label>
        <textarea name="notes" rows="4">{{ rdv.notes if rdv else '' }}</textarea>

        <button class="btn" type="submit" style="margin-top: 1rem;">
            {% if action == "new" %}
                Ajouter le rendez-vous
            {% else %}
                Enregistrer les modifications
            {% endif %}
        </button>

    </form>

</div>

{% endblock %}
